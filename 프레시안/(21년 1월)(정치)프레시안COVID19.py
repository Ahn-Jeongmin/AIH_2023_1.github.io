import excluded as ex
import requests
from bs4 import BeautifulSoup
from collections import Counter
import re
import numpy as np
import matplotlib.pyplot as plt
from konlpy.tag import Okt

plt.rc("font", family="Malgun Gothic")

urls=['https://www.pressian.com/pages/articles/2021022807422221953', 'https://www.pressian.com/pages/articles/2021022807480643797', 'https://www.pressian.com/pages/articles/2021022616113771877', 'https://www.pressian.com/pages/articles/2021022615585218101', 'https://www.pressian.com/pages/articles/2021022614152896252', 'https://www.pressian.com/pages/articles/2021022610594457091', 'https://www.pressian.com/pages/articles/2021022610440015007', 'https://www.pressian.com/pages/articles/2021022610425098328', 'https://www.pressian.com/pages/articles/2021022610240853331', 'https://www.pressian.com/pages/articles/2021022609292421077', 'https://www.pressian.com/pages/articles/2021022520074790290', 'https://www.pressian.com/pages/articles/2021022517290114513', 'https://www.pressian.com/pages/articles/2021022510254800173', 'https://www.pressian.com/pages/articles/2021022515052095567', 'https://www.pressian.com/pages/articles/2021022511011202217', 'https://www.pressian.com/pages/articles/2021022511260835853', 'https://www.pressian.com/pages/articles/2021022420445125264', 'https://www.pressian.com/pages/articles/2021022417401166546', 'https://www.pressian.com/pages/articles/2021022415384627935', 'https://www.pressian.com/pages/articles/2021022413554200352', 'https://www.pressian.com/pages/articles/2021022411574930398', 'https://www.pressian.com/pages/articles/2021022410535975619', 'https://www.pressian.com/pages/articles/2021022316321853720', 'https://www.pressian.com/pages/articles/2021022316234095792', 'https://www.pressian.com/pages/articles/2021022311481770447', 'https://www.pressian.com/pages/articles/2021022310500816246', 'https://www.pressian.com/pages/articles/2021022310374046663', 'https://www.pressian.com/pages/articles/2021022215495610721', 'https://www.pressian.com/pages/articles/2021022215370279824', 'https://www.pressian.com/pages/articles/2021022215092195928', 'https://www.pressian.com/pages/articles/2021022213542672454', 'https://www.pressian.com/pages/articles/2021022211032177479', 'https://www.pressian.com/pages/articles/2021022210185894289', 'https://www.pressian.com/pages/articles/2021022210482353547', 'https://www.pressian.com/pages/articles/2021022209391817855', 'https://www.pressian.com/pages/articles/2021022209435579601', 'https://www.pressian.com/pages/articles/2021022121591080451', 'https://www.pressian.com/pages/articles/2021022115431391928', 'https://www.pressian.com/pages/articles/2021022115022496115', 'https://www.pressian.com/pages/articles/2021022114480232147', 'https://www.pressian.com/pages/articles/2021022010042257150', 'https://www.pressian.com/pages/articles/2021021917025385803', 'https://www.pressian.com/pages/articles/2021021916522590229', 'https://www.pressian.com/pages/articles/2021021915394603283', 'https://www.pressian.com/pages/articles/2021021912391017520', 'https://www.pressian.com/pages/articles/2021021910474325086', 'https://www.pressian.com/pages/articles/2021021910370321429', 'https://www.pressian.com/pages/articles/2021021910372527540', 'https://www.pressian.com/pages/articles/2021021910152030754', 'https://www.pressian.com/pages/articles/2021021907335591994', 'https://www.pressian.com/pages/articles/2021021818475178583', 'https://www.pressian.com/pages/articles/2021021816284210051', 'https://www.pressian.com/pages/articles/2021021815542614518', 'https://www.pressian.com/pages/articles/2021021812215069785', 'https://www.pressian.com/pages/articles/2021021810523226420', 'https://www.pressian.com/pages/articles/2021021713445395173', 'https://www.pressian.com/pages/articles/2021021717190049369', 'https://www.pressian.com/pages/articles/2021021717152715575', 'https://www.pressian.com/pages/articles/2021021711270463291', 'https://www.pressian.com/pages/articles/2021021710283369678', 'https://www.pressian.com/pages/articles/2021021709595736187', 'https://www.pressian.com/pages/articles/2021021618560625630', 'https://www.pressian.com/pages/articles/2021021621240438095', 'https://www.pressian.com/pages/articles/2021021619210012375', 'https://www.pressian.com/pages/articles/2021021618225991063', 'https://www.pressian.com/pages/articles/2021021616391006796', 'https://www.pressian.com/pages/articles/2021021616332604804', 'https://www.pressian.com/pages/articles/2021021616064556080', 'https://www.pressian.com/pages/articles/2021021611173694508', 'https://www.pressian.com/pages/articles/2021021611134821852', 'https://www.pressian.com/pages/articles/2021021515015046988', 'https://www.pressian.com/pages/articles/2021021514371694732', 'https://www.pressian.com/pages/articles/2021021511094875029', 'https://www.pressian.com/pages/articles/2021021510362058002', 'https://www.pressian.com/pages/articles/2021021421210022886', 'https://www.pressian.com/pages/articles/2021021417481678599', 'https://www.pressian.com/pages/articles/2021021414544925118', 'https://www.pressian.com/pages/articles/2021021414240986586', 'https://www.pressian.com/pages/articles/2021021414260007485', 'https://www.pressian.com/pages/articles/2021021413101689041', 'https://www.pressian.com/pages/articles/2021021212022850647', 'https://www.pressian.com/pages/articles/2021021111464529649', 'https://www.pressian.com/pages/articles/2021021117061443174', 'https://www.pressian.com/pages/articles/2021021111442231634', 'https://www.pressian.com/pages/articles/2021021015394127600', 'https://www.pressian.com/pages/articles/2021021011551279281', 'https://www.pressian.com/pages/articles/2021021013575958924', 'https://www.pressian.com/pages/articles/2021021011221933706', 'https://www.pressian.com/pages/articles/2021020917500586291', 'https://www.pressian.com/pages/articles/2021020915503832144', 'https://www.pressian.com/pages/articles/2021020915045280025', 'https://www.pressian.com/pages/articles/2021020911204271544', 'https://www.pressian.com/pages/articles/2021020817034233425', 'https://www.pressian.com/pages/articles/2021020815204610110', 'https://www.pressian.com/pages/articles/2021020815390713294', 'https://www.pressian.com/pages/articles/2021020810502590562', 'https://www.pressian.com/pages/articles/2021020810552282146', 'https://www.pressian.com/pages/articles/2021020810323398517', 'https://www.pressian.com/pages/articles/2021020809373198818', 'https://www.pressian.com/pages/articles/2021020717365405278', 'https://www.pressian.com/pages/articles/2021020715184216328', 'https://www.pressian.com/pages/articles/2021020714172327352', 'https://www.pressian.com/pages/articles/2021020513151961797', 'https://www.pressian.com/pages/articles/2021020516233716806', 'https://www.pressian.com/pages/articles/2021020516050588129', 'https://www.pressian.com/pages/articles/2021020512030358700', 'https://www.pressian.com/pages/articles/2021020511401193998', 'https://www.pressian.com/pages/articles/2021020511154801799', 'https://www.pressian.com/pages/articles/2021020511123352077', 'https://www.pressian.com/pages/articles/2021020510252706888', 'https://www.pressian.com/pages/articles/2021020510214632513', 'https://www.pressian.com/pages/articles/2021020414123533689', 'https://www.pressian.com/pages/articles/2021020414494252301', 'https://www.pressian.com/pages/articles/2021020414592201913', 'https://www.pressian.com/pages/articles/2021020411280829805', 'https://www.pressian.com/pages/articles/2021020410520702184', 'https://www.pressian.com/pages/articles/2021020410314214281', 'https://www.pressian.com/pages/articles/2021020409423115713', 'https://www.pressian.com/pages/articles/2021020322292031475', 'https://www.pressian.com/pages/articles/2021020314592798207', 'https://www.pressian.com/pages/articles/2021020315583163323', 'https://www.pressian.com/pages/articles/2021020315434721805', 'https://www.pressian.com/pages/articles/2021020314511050185', 'https://www.pressian.com/pages/articles/2021020314221501078', 'https://www.pressian.com/pages/articles/2021020311115697736', 'https://www.pressian.com/pages/articles/2021020312093520659', 'https://www.pressian.com/pages/articles/2021020310020506095', 'https://www.pressian.com/pages/articles/2021020309271370511', 'https://www.pressian.com/pages/articles/2021020222544561296', 'https://www.pressian.com/pages/articles/2021020218122612900', 'https://www.pressian.com/pages/articles/2021020217544908115', 'https://www.pressian.com/pages/articles/2021020215525287205', 'https://www.pressian.com/pages/articles/2021020215164284585', 'https://www.pressian.com/pages/articles/2021020212484668449', 'https://www.pressian.com/pages/articles/2021020211402198526', 'https://www.pressian.com/pages/articles/2021020210362049987', 'https://www.pressian.com/pages/articles/2021020210105243902', 'https://www.pressian.com/pages/articles/2021020116293639099', 'https://www.pressian.com/pages/articles/2021020208173878262', 'https://www.pressian.com/pages/articles/2021020116341424217', 'https://www.pressian.com/pages/articles/2021020114585387125', 'https://www.pressian.com/pages/articles/2021020110414028518', 'https://www.pressian.com/pages/articles/2021020111412393406', 'https://www.pressian.com/pages/articles/2021020111460576045', 'https://www.pressian.com/pages/articles/2021020111044442939', 'https://www.pressian.com/pages/articles/2021020110392478534', 'https://www.pressian.com/pages/articles/2021020109214802373', 'https://www.pressian.com/pages/articles/2021013120274580318', 'https://www.pressian.com/pages/articles/2021013120175757935', 'https://www.pressian.com/pages/articles/2021013118485170301', 'https://www.pressian.com/pages/articles/2021013116563841916', 'https://www.pressian.com/pages/articles/2021013117050017858', 'https://www.pressian.com/pages/articles/2021013115125776588', 'https://www.pressian.com/pages/articles/2021013009011658702', 'https://www.pressian.com/pages/articles/2021012917583250404', 'https://www.pressian.com/pages/articles/2021012914372384567', 'https://www.pressian.com/pages/articles/2021012912033640475', 'https://www.pressian.com/pages/articles/2021012910354727488', 'https://www.pressian.com/pages/articles/2021012822544440542', 'https://www.pressian.com/pages/articles/2021012819165471269', 'https://www.pressian.com/pages/articles/2021012815252285822', 'https://www.pressian.com/pages/articles/2021012812221928845', 'https://www.pressian.com/pages/articles/2021012812390017880', 'https://www.pressian.com/pages/articles/2021012810385001063', 'https://www.pressian.com/pages/articles/2021012716145452271', 'https://www.pressian.com/pages/articles/2021012712422629913', 'https://www.pressian.com/pages/articles/2021012710413076282', 'https://www.pressian.com/pages/articles/2021012708454486343', 'https://www.pressian.com/pages/articles/2021012623261770624', 'https://www.pressian.com/pages/articles/2021012620282095469', 'https://www.pressian.com/pages/articles/2021012617293131717', 'https://www.pressian.com/pages/articles/2021012614463909069', 'https://www.pressian.com/pages/articles/2021012612041400776', 'https://www.pressian.com/pages/articles/2021012611332617533', 'https://www.pressian.com/pages/articles/2021012611275331502', 'https://www.pressian.com/pages/articles/2021012517410720336', 'https://www.pressian.com/pages/articles/2021012517391048321', 'https://www.pressian.com/pages/articles/2021012516434342409', 'https://www.pressian.com/pages/articles/2021012510553393018', 'https://www.pressian.com/pages/articles/2021012511475713484', 'https://www.pressian.com/pages/articles/2021012511200939626', 'https://www.pressian.com/pages/articles/2021012511191179236', 'https://www.pressian.com/pages/articles/2021012510190771759', 'https://www.pressian.com/pages/articles/2021012510195069486', 'https://www.pressian.com/pages/articles/2021012509581868821', 'https://www.pressian.com/pages/articles/2021012509131866512', 'https://www.pressian.com/pages/articles/2021012416104272423', 'https://www.pressian.com/pages/articles/2021012415440007972', 'https://www.pressian.com/pages/articles/2021012414242016648', 'https://www.pressian.com/pages/articles/2021012413565411300', 'https://www.pressian.com/pages/articles/2021012412355840291', 'https://www.pressian.com/pages/articles/2021012214374922009', 'https://www.pressian.com/pages/articles/2021012212492721366', 'https://www.pressian.com/pages/articles/2021012210282901416', 'https://www.pressian.com/pages/articles/2021012210200889556', 'https://www.pressian.com/pages/articles/2021012117510447778', 'https://www.pressian.com/pages/articles/2021012117394293769', 'https://www.pressian.com/pages/articles/2021012119202148320', 'https://www.pressian.com/pages/articles/2021012113302410294', 'https://www.pressian.com/pages/articles/2021012116071369000', 'https://www.pressian.com/pages/articles/2021012112292743363', 'https://www.pressian.com/pages/articles/2021012116034316026', 'https://www.pressian.com/pages/articles/2021012115010739869', 'https://www.pressian.com/pages/articles/2021012114125987629', 'https://www.pressian.com/pages/articles/2021012111282508921', 'https://www.pressian.com/pages/articles/2021012111253219129', 'https://www.pressian.com/pages/articles/2021012110424203383', 'https://www.pressian.com/pages/articles/2021012109200748731', 'https://www.pressian.com/pages/articles/2021012010281502144', 'https://www.pressian.com/pages/articles/2021012016241767407', 'https://www.pressian.com/pages/articles/2021012016481982595', 'https://www.pressian.com/pages/articles/2021012009300632691', 'https://www.pressian.com/pages/articles/2021012016322335421', 'https://www.pressian.com/pages/articles/2021012014180157761', 'https://www.pressian.com/pages/articles/2021012012263074462', 'https://www.pressian.com/pages/articles/2021012012182346227', 'https://www.pressian.com/pages/articles/2021012010024603107', 'https://www.pressian.com/pages/articles/2021012009421709205', 'https://www.pressian.com/pages/articles/2021011918271770725', 'https://www.pressian.com/pages/articles/2021011915314747975', 'https://www.pressian.com/pages/articles/2021011915223459696', 'https://www.pressian.com/pages/articles/2021011910321975581', 'https://www.pressian.com/pages/articles/2021011910174197491', 'https://www.pressian.com/pages/articles/2021011812504770254', 'https://www.pressian.com/pages/articles/2021011815321103165', 'https://www.pressian.com/pages/articles/2021011814090927455', 'https://www.pressian.com/pages/articles/2021011811080236706', 'https://www.pressian.com/pages/articles/2021011813060195668', 'https://www.pressian.com/pages/articles/2021011812394362063', 'https://www.pressian.com/pages/articles/2021011812391287802', 'https://www.pressian.com/pages/articles/2021011812192412547', 'https://www.pressian.com/pages/articles/2021011812161449725', 'https://www.pressian.com/pages/articles/2021011811290570054', 'https://www.pressian.com/pages/articles/2021011810590583285', 'https://www.pressian.com/pages/articles/2021011810304669322', 'https://www.pressian.com/pages/articles/2021011809135745716', 'https://www.pressian.com/pages/articles/2021011715252451834', 'https://www.pressian.com/pages/articles/2021011715011872085', 'https://www.pressian.com/pages/articles/2021011713124424122', 'https://www.pressian.com/pages/articles/2021011713034898777', 'https://www.pressian.com/pages/articles/2021011617550289825', 'https://www.pressian.com/pages/articles/2021011310574763948', 'https://www.pressian.com/pages/articles/2021011516221502350', 'https://www.pressian.com/pages/articles/2021011517045274673', 'https://www.pressian.com/pages/articles/2021011515254593451', 'https://www.pressian.com/pages/articles/2021011515182396484', 'https://www.pressian.com/pages/articles/2021011511123274060', 'https://www.pressian.com/pages/articles/2021011511064601581', 'https://www.pressian.com/pages/articles/2021011510452683785', 'https://www.pressian.com/pages/articles/2021011509262660464', 'https://www.pressian.com/pages/articles/2021011421023238300', 'https://www.pressian.com/pages/articles/2021011418302391556', 'https://www.pressian.com/pages/articles/2021011415522173035', 'https://www.pressian.com/pages/articles/2021011414492554299', 'https://www.pressian.com/pages/articles/2021011414322604818', 'https://www.pressian.com/pages/articles/2021011410551189548', 'https://www.pressian.com/pages/articles/2021011410580462240', 'https://www.pressian.com/pages/articles/2021011410090304996', 'https://www.pressian.com/pages/articles/2021011314245670961', 'https://www.pressian.com/pages/articles/2021011311470540011', 'https://www.pressian.com/pages/articles/2021011317193082001', 'https://www.pressian.com/pages/articles/2021011315290253966', 'https://www.pressian.com/pages/articles/2021011311160674159', 'https://www.pressian.com/pages/articles/2021011311350326410', 'https://www.pressian.com/pages/articles/2021011311265971339', 'https://www.pressian.com/pages/articles/2021011310241859644', 'https://www.pressian.com/pages/articles/2021011309325162568', 'https://www.pressian.com/pages/articles/2021011309031213262', 'https://www.pressian.com/pages/articles/2021011222162212803', 'https://www.pressian.com/pages/articles/2021011213593021543', 'https://www.pressian.com/pages/articles/2021011210360409735', 'https://www.pressian.com/pages/articles/2021011118474105418', 'https://www.pressian.com/pages/articles/2021011117004070866', 'https://www.pressian.com/pages/articles/2021011115354357540', 'https://www.pressian.com/pages/articles/2021011116111262801', 'https://www.pressian.com/pages/articles/2021011112491210171', 'https://www.pressian.com/pages/articles/2021011114022936310', 'https://www.pressian.com/pages/articles/2021011111323250740', 'https://www.pressian.com/pages/articles/2021011110563709570', 'https://www.pressian.com/pages/articles/2021011110370289459', 'https://www.pressian.com/pages/articles/2021011110215008140', 'https://www.pressian.com/pages/articles/2021011109574072078', 'https://www.pressian.com/pages/articles/2021011018141437301', 'https://www.pressian.com/pages/articles/2021011016282851205', 'https://www.pressian.com/pages/articles/2021011016242560167', 'https://www.pressian.com/pages/articles/2021011016054043893', 'https://www.pressian.com/pages/articles/2021011015285272516', 'https://www.pressian.com/pages/articles/2021010913275672738', 'https://www.pressian.com/pages/articles/2021010913274208815', 'https://www.pressian.com/pages/articles/2021010912504324518', 'https://www.pressian.com/pages/articles/2021010819593826060', 'https://www.pressian.com/pages/articles/2021010818045779726', 'https://www.pressian.com/pages/articles/2021010817272358838', 'https://www.pressian.com/pages/articles/2021010813374201517', 'https://www.pressian.com/pages/articles/2021010812145075217', 'https://www.pressian.com/pages/articles/2021010811231042481', 'https://www.pressian.com/pages/articles/2021010810471831295', 'https://www.pressian.com/pages/articles/2021010810262143186', 'https://www.pressian.com/pages/articles/2021010808402849115', 'https://www.pressian.com/pages/articles/2021010716535488057', 'https://www.pressian.com/pages/articles/2021010716294989546', 'https://www.pressian.com/pages/articles/2021010716024184434', 'https://www.pressian.com/pages/articles/2021010715480004340', 'https://www.pressian.com/pages/articles/2021010715424260263', 'https://www.pressian.com/pages/articles/2021010712115691435', 'https://www.pressian.com/pages/articles/2021010711463746185', 'https://www.pressian.com/pages/articles/2021010711480367270', 'https://www.pressian.com/pages/articles/2021010710573201959', 'https://www.pressian.com/pages/articles/2021010615500988907', 'https://www.pressian.com/pages/articles/2021010614354730284', 'https://www.pressian.com/pages/articles/2021010614352439066', 'https://www.pressian.com/pages/articles/2021010612260311283', 'https://www.pressian.com/pages/articles/2021010611500030760', 'https://www.pressian.com/pages/articles/2021010611033082510', 'https://www.pressian.com/pages/articles/2021010609451371305', 'https://www.pressian.com/pages/articles/2021010609243589802', 'https://www.pressian.com/pages/articles/2021010517043080008', 'https://www.pressian.com/pages/articles/2021010516471722754', 'https://www.pressian.com/pages/articles/2021010515325919286', 'https://www.pressian.com/pages/articles/2021010515083509725', 'https://www.pressian.com/pages/articles/2021010514491368220', 'https://www.pressian.com/pages/articles/2021010514290082270', 'https://www.pressian.com/pages/articles/2021010510550827764', 'https://www.pressian.com/pages/articles/2021010510502780744', 'https://www.pressian.com/pages/articles/2021010510523743594', 'https://www.pressian.com/pages/articles/2021010418314940679', 'https://www.pressian.com/pages/articles/2021010417330272647', 'https://www.pressian.com/pages/articles/2021010417151734839', 'https://www.pressian.com/pages/articles/2021010414161772870', 'https://www.pressian.com/pages/articles/2021010412010380402', 'https://www.pressian.com/pages/articles/2021010411334009165', 'https://www.pressian.com/pages/articles/2021010411105992049', 'https://www.pressian.com/pages/articles/2021010410553784586', 'https://www.pressian.com/pages/articles/2021010409164202494', 'https://www.pressian.com/pages/articles/2021010317203270534', 'https://www.pressian.com/pages/articles/2021010316283093011', 'https://www.pressian.com/pages/articles/2021010315072477007', 'https://www.pressian.com/pages/articles/2021010219554969033', 'https://www.pressian.com/pages/articles/2020123119212129028', 'https://www.pressian.com/pages/articles/2020123118205257706']


#####################
# 전체 단어 빈도를 저장할 Counter 객체
total_word_counts = Counter()

okt = Okt()
for url in urls:
    response = requests.get(url)

    # HTML 파싱
    soup = BeautifulSoup(response.text, 'html.parser')

    # 기사 본문 선택
    article_body_elements = soup.select(
        'div#wrap>div#container>div.inner>div.article_view>div.section.pr10>div.article_body.article_body')
    for article_body_element in article_body_elements:
        # 특수 문자 제거 및 소문자 변환
        article_body = re.sub(r"[^\w\s]", "", str(article_body_element)).lower()

        # 명사 추출
        nouns = okt.nouns(article_body)

        ex.excluded_words.extend(["코로나","코로나바이러스"])

        # 단어 빈도 분석
        word_counts = Counter(word for word in nouns if word not in ex.excluded_words)

        # 단어 빈도를 전체 빈도에 누적
        total_word_counts += word_counts

# 가장 많이 등장한 단어 50개 추출
top_words = total_word_counts.most_common(50)

# 시각화를 위한 데이터 준비
labels, counts = zip(*top_words)
x = np.arange(len(labels))

# 막대 그래프 그리기
plt.bar(x, counts, align="center")
plt.xticks(x, labels)
plt.xlabel("단어")
plt.ylabel("빈도수")
plt.title("프레시안 코로나 <21년 1월-정치> 관련 기사 단어 빈도수 분석")
plt.show()

# 결과 출력
print("프레시안 코로나 관련 <21년 1월-정치> 기사 중 가장 많이 등장한 단어 50개:")
for word, count in top_words:
    print(f"{word}: {count}")

# 사용자 입력 대기
input("Press Enter to exit...")